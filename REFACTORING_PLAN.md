# BFD Analytics ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°è¨ˆç”»æ›¸

**ä½œæˆæ—¥**: 2025-11-29  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
**å¯¾è±¡ãƒªãƒã‚¸ãƒˆãƒª**: excel_visualization2

---

## ğŸ“‹ ç›®æ¬¡

1. [ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼](#1-ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼)
2. [ç¾çŠ¶åˆ†æ](#2-ç¾çŠ¶åˆ†æ)
3. [å•é¡Œç‚¹ã¨æ”¹å–„æ©Ÿä¼š](#3-å•é¡Œç‚¹ã¨æ”¹å–„æ©Ÿä¼š)
4. [ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æˆ¦ç•¥](#4-ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æˆ¦ç•¥)
5. [ãƒ•ã‚§ãƒ¼ã‚ºåˆ¥å®Ÿè£…è¨ˆç”»](#5-ãƒ•ã‚§ãƒ¼ã‚ºåˆ¥å®Ÿè£…è¨ˆç”»)
6. [æŠ€è¡“çš„è©³ç´°](#6-æŠ€è¡“çš„è©³ç´°)
7. [ãƒªã‚¹ã‚¯ã¨å¯¾ç­–](#7-ãƒªã‚¹ã‚¯ã¨å¯¾ç­–)
8. [æˆåŠŸæŒ‡æ¨™](#8-æˆåŠŸæŒ‡æ¨™)

---

## 1. ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

### 1.1 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

BFD Analyticsã¯ã€ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ•ã‚¡ãƒãƒ«åˆ†æã‚’è¡Œã†Reactãƒ™ãƒ¼ã‚¹ã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚Excelãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã€12ç¨®é¡ã®åˆ†æãƒ¢ãƒ¼ãƒ‰ã§å¤šè§’çš„ãªãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚

### 1.2 ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®ç›®çš„

- **ä¿å®ˆæ€§ã®å‘ä¸Š**: ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡å‰Šæ¸›ã€é–¢å¿ƒã®åˆ†é›¢
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**: ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°åŠ¹ç‡ã®æ”¹å–„
- **æ‹¡å¼µæ€§ã®ç¢ºä¿**: æ–°æ©Ÿèƒ½è¿½åŠ ã®å®¹æ˜“åŒ–
- **ã‚³ãƒ¼ãƒ‰å“è³ª**: TypeScriptå‹å®‰å…¨æ€§ã®å¼·åŒ–
- **é–‹ç™ºè€…ä½“é¨“**: ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§å‘ä¸Š

### 1.3 æ¨å¥¨å®Ÿæ–½æœŸé–“

- **ãƒ•ã‚§ãƒ¼ã‚º1**: 2é€±é–“ï¼ˆåŸºç›¤æ•´ç†ï¼‰
- **ãƒ•ã‚§ãƒ¼ã‚º2**: 2é€±é–“ï¼ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæœ€é©åŒ–ï¼‰
- **ãƒ•ã‚§ãƒ¼ã‚º3**: 2é€±é–“ï¼ˆé«˜åº¦ãªæœ€é©åŒ–ï¼‰
- **åˆè¨ˆ**: ç´„6é€±é–“

---

## 2. ç¾çŠ¶åˆ†æ

### 2.1 ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹æ¦‚è¦

```
ç·è¡Œæ•°: ç´„8,500è¡Œ
ä¸»è¦ãƒ•ã‚¡ã‚¤ãƒ«:
  - App.tsx: 991è¡Œï¼ˆå·¨å¤§ãªãƒ¢ãƒãƒªã‚¹ï¼‰
  - ChartArea.tsx: 685è¡Œ
  - Sidebar.tsx: 449è¡Œ
  - dataTransforms.ts: 221è¡Œ
  - analysisConfigs.ts: 400è¡Œ
```

### 2.2 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ |
|---------|------|----------|
| ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | React | 19.2.0 |
| è¨€èª | TypeScript | 5.8.2 |
| ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ« | Vite | 6.2.0 |
| ãƒãƒ£ãƒ¼ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª | Recharts | 3.4.1 |
| Excelãƒ‘ãƒ¼ã‚µãƒ¼ | XLSX | 0.18.5 |
| ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ— | @dnd-kit/* | latest |
| ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° | Tailwind CSS | - |

### 2.3 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
app/
â”œâ”€â”€ App.tsx (ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ)
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”œâ”€â”€ ChartArea.tsx
â”‚   â”œâ”€â”€ IconBar.tsx
â”‚   â”œâ”€â”€ AnalysisItemsSection.tsx
â”‚   â”œâ”€â”€ BrandsSection.tsx
â”‚   â”œâ”€â”€ SegmentsSection.tsx
â”‚   â””â”€â”€ SortableBrandItem.tsx
â”œâ”€â”€ constants/
â”‚   â”œâ”€â”€ constants.ts
â”‚   â”œâ”€â”€ analysisConfigs.ts
â”‚   â””â”€â”€ modeConfigs.ts
â”œâ”€â”€ types.ts
â””â”€â”€ utils/
    â””â”€â”€ dataTransforms.ts
```

### 2.4 å¼·ã¿

âœ… **è¨­å®šé§†å‹•å‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: `ANALYSIS_MODE_CONFIGS`ã«ã‚ˆã‚‹æŸ”è»Ÿãªãƒ¢ãƒ¼ãƒ‰ç®¡ç†  
âœ… **å‹å®‰å…¨æ€§**: TypeScriptã«ã‚ˆã‚‹é™çš„å‹ãƒã‚§ãƒƒã‚¯  
âœ… **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†å‰²**: UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é©åˆ‡ãªåˆ†é›¢  
âœ… **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“**: Drag & Dropã€ç”»åƒã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã€CSVå‡ºåŠ›ãªã©å……å®Ÿ  
âœ… **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³**: ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œæ¸ˆã¿  

---

## 3. å•é¡Œç‚¹ã¨æ”¹å–„æ©Ÿä¼š

### 3.1 ã‚³ãƒ¼ãƒ‰å“è³ªã®å•é¡Œ

#### ğŸ”´ é‡å¤§åº¦: é«˜

**P1: App.tsxã®è‚¥å¤§åŒ–ï¼ˆ991è¡Œï¼‰**
```typescript
// å•é¡Œã®ã‚³ãƒ¼ãƒ‰ä¾‹
const App: React.FC = () => {
  // 50å€‹ä»¥ä¸Šã®stateå®šç¾©
  const [data, setData] = useState<SheetData>({}); // Excelèª­ã¿è¾¼ã¿å‰æ
  const [brandImageData, setBrandImageData] = useState<BrandImageData>({});
  const [analysisMode, setAnalysisMode] = useState<AnalysisMode>(...);
  // ... ä»¥ä¸‹40å€‹ä»¥ä¸Šã®state
  
  // 300è¡Œä»¥ä¸Šã®Excelãƒ‘ãƒ¼ã‚¹å‡¦ç†
  const parseExcelData = async (arrayBuffer: ArrayBuffer) => {
    // å·¨å¤§ãªå‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯
  };
  
  // å·¨å¤§ãªJSXãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆ600è¡Œï¼‰
  return (
    <div className="...">
      {/* è¤‡é›‘ãªãƒã‚¹ãƒˆæ§‹é€  */}
    </div>
  );
};
```

**å½±éŸ¿**:
- å¯èª­æ€§ã®ä½ä¸‹
- ãƒ†ã‚¹ãƒˆã®å›°é›£ã•
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œï¼ˆç„¡é§„ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼‰
- æ–°æ©Ÿèƒ½è¿½åŠ ã®å›°é›£ã•

---

**P2: é‡è¤‡ã‚³ãƒ¼ãƒ‰**

```typescript
// ä¾‹1: ã‚»ã‚°ãƒ¡ãƒ³ãƒˆåã®æ•´å½¢å‡¦ç†ãŒè¤‡æ•°ç®‡æ‰€ã«æ•£åœ¨
// ChartArea.tsx (3ç®‡æ‰€)
seg.replace(/[ï¼ˆ(]BFDã‚·ãƒ¼ãƒˆ[_ï¼¿]?[å€¤]?[ï¼‰)]?.*?St\d+/g, '').trim()

// Sidebar.tsx (2ç®‡æ‰€)
seg.replace(/[ï¼ˆ(]BFDã‚·ãƒ¼ãƒˆ[_ï¼¿]?[å€¤]?[ï¼‰)]?.*?St\d+/g, '').trim()

// SegmentsSection.tsx (2ç®‡æ‰€)
seg.replace(/[ï¼ˆ(]BFDã‚·ãƒ¼ãƒˆ[_ï¼¿]?[å€¤]?[ï¼‰)]?.*?St\d+/g, '').trim()
```

**å½±éŸ¿**:
- ãƒã‚°ã®æ··å…¥ãƒªã‚¹ã‚¯
- ä¿®æ­£æ™‚ã®å¤‰æ›´æ¼ã‚Œ
- ä¿å®ˆã‚³ã‚¹ãƒˆã®å¢—å¤§

---

**P3: å‹å®‰å…¨æ€§ã®ä¸è¶³**

```typescript
// å•é¡Œã®ã‚³ãƒ¼ãƒ‰ä¾‹
type BrandImageData = Record<string, Record<string, Record<string, number>>>;
// ãƒã‚¹ãƒˆãŒæ·±ã™ãã¦æ„å‘³ãŒä¸æ˜ç¢º

// anyå‹ã®ä½¿ç”¨
activePalette: any[];
```

**å½±éŸ¿**:
- å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼ã®å¯èƒ½æ€§
- IDEã®è£œå®Œæ©Ÿèƒ½ãŒåƒãã«ãã„
- ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®å›°é›£ã•

---

#### ğŸŸ¡ é‡å¤§åº¦: ä¸­

**P4: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œ**

```typescript
// å•é¡Œã®ã‚³ãƒ¼ãƒ‰ä¾‹
const chartData = useMemo(
  () => {
    // è¤‡é›‘ãªè¨ˆç®—å‡¦ç†
  },
  [data, brandImageData, analysisMode, getFilterValue, getSeriesValues, 
   getXAxisValues, getBrandName] // ä¾å­˜é…åˆ—ãŒå¤šã™ãã‚‹
);
```

**å½±éŸ¿**:
- ä¸è¦ãªå†è¨ˆç®—
- UIã®é…å»¶
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®å¢—åŠ 

---

**P5: ãƒ‡ãƒ¼ã‚¿å¤‰æ›ãƒ­ã‚¸ãƒƒã‚¯ã®è¤‡é›‘ã•**

```typescript
// dataTransforms.ts
export const transformDataForChart = (
  data: SheetData,
  modeConfig: AnalysisModeConfig,
  filterValues: Record<AxisType, string>,
  seriesValues: Record<AxisType, string[]>,
  labelGetters: Record<AxisType, (key: string) => string>,
  brandImageData?: BrandImageData
): ChartDataPoint[] => {
  // 100è¡Œä»¥ä¸Šã®è¤‡é›‘ãªå‡¦ç†
};
```

**å½±éŸ¿**:
- ãƒ†ã‚¹ãƒˆã®å›°é›£ã•
- ãƒ‡ãƒãƒƒã‚°ã®é›£ã—ã•
- æ–°ã—ã„ãƒ¢ãƒ¼ãƒ‰è¿½åŠ ã®å›°é›£ã•

---

**P6: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®å¯†çµåˆ**

```typescript
// SidebarãŒå—ã‘å–ã‚‹propsãŒå¤šã™ãã‚‹ï¼ˆ83å€‹ï¼‰
interface SidebarProps {
  isExcelData: boolean;
  isAnonymized: boolean;
  toggleAnonymization: () => void;
  // ... 80å€‹ä»¥ä¸Šã®props
}
```

**å½±éŸ¿**:
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å†åˆ©ç”¨ãŒå›°é›£
- ãƒ†ã‚¹ãƒˆã®è¤‡é›‘åŒ–
- å¤‰æ›´ã®å½±éŸ¿ç¯„å›²ãŒåºƒã„

---

### 3.2 è¨­è¨ˆä¸Šã®å•é¡Œ

**D1: çŠ¶æ…‹ç®¡ç†ã®åˆ†æ•£**
- Appã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å…¨ã¦ã®çŠ¶æ…‹ãŒé›†ä¸­
- localStorageæ“ä½œãŒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã«æ•£åœ¨
- ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæœªä½¿ç”¨

**D2: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¨UIã®æ··åœ¨**
- ãƒ‡ãƒ¼ã‚¿å¤‰æ›å‡¦ç†ãŒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã«è¨˜è¿°
- Excelãƒ‘ãƒ¼ã‚¹å‡¦ç†ãŒAppã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…

**D3: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ä¸è¶³**
```typescript
// å•é¡Œã®ã‚³ãƒ¼ãƒ‰ä¾‹
try {
  const arrayBuffer = await response.arrayBuffer();
  await parseExcelData(arrayBuffer);
} catch (error) {
  console.error(error); // ã‚¨ãƒ©ãƒ¼å‡¦ç†ãŒä¸ååˆ†
  alert('ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
}
```

**D4: ãƒ†ã‚¹ãƒˆã®æ¬ å¦‚**
- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆæœªå®Ÿè£…
- E2Eãƒ†ã‚¹ãƒˆæœªå®Ÿè£…
- ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸0%

---

### 3.3 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å•é¡Œ

**DOC1: ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚³ãƒ¡ãƒ³ãƒˆä¸è¶³**
- è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ã®èª¬æ˜ãŒä¸è¶³
- å‹å®šç¾©ã®æ„å›³ãŒä¸æ˜ç¢º

**DOC2: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸è¶³**
- è¨­è¨ˆæ„å›³ãŒä¸æ˜ç¢º
- æ–°è¦ãƒ¡ãƒ³ãƒãƒ¼ã®ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒå›°é›£

---

## 4. ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æˆ¦ç•¥

### 4.1 åŸºæœ¬æ–¹é‡

1. **æ®µéšçš„ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°**: æ©Ÿèƒ½ã‚’ç¶­æŒã—ãªãŒã‚‰å°‘ã—ãšã¤æ”¹å–„
2. **ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ**: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å‰ã«æ—¢å­˜æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆã‚’ä½œæˆ
3. **å‹å®‰å…¨æ€§ã®å¼·åŒ–**: TypeScriptã®å‹ã‚·ã‚¹ãƒ†ãƒ ã‚’æœ€å¤§é™æ´»ç”¨
4. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬**: æ”¹å–„å‰å¾Œã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å®Ÿæ–½
5. **å¾Œæ–¹äº’æ›æ€§**: æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã¨ã®äº’æ›æ€§ã‚’ç¶­æŒ

### 4.2 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ”¹å–„

#### æ–°ã—ã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
src/
â”œâ”€â”€ components/           # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ common/          # å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ Button/
â”‚   â”‚   â”œâ”€â”€ Select/
â”‚   â”‚   â””â”€â”€ Badge/
â”‚   â”œâ”€â”€ layout/          # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ Sidebar/
â”‚   â”‚   â”œâ”€â”€ IconBar/
â”‚   â”‚   â””â”€â”€ Header/
â”‚   â”œâ”€â”€ chart/           # ãƒãƒ£ãƒ¼ãƒˆé–¢é€£
â”‚   â”‚   â”œâ”€â”€ ChartContainer/
â”‚   â”‚   â”œâ”€â”€ ChartLegend/
â”‚   â”‚   â””â”€â”€ ChartTable/
â”‚   â””â”€â”€ analysis/        # åˆ†æé–¢é€£
â”‚       â”œâ”€â”€ AnalysisControls/
â”‚       â”œâ”€â”€ BrandSelector/
â”‚       â””â”€â”€ SegmentSelector/
â”œâ”€â”€ hooks/               # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”œâ”€â”€ useChartData.ts
â”‚   â”œâ”€â”€ useExcelParser.ts
â”‚   â”œâ”€â”€ useAnalysisMode.ts
â”‚   â””â”€â”€ usePersistence.ts
â”œâ”€â”€ services/            # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ excelParser/
â”‚   â”‚   â”œâ”€â”€ parser.ts
â”‚   â”‚   â””â”€â”€ validators.ts
â”‚   â”œâ”€â”€ dataTransform/
â”‚   â”‚   â”œâ”€â”€ transformer.ts
â”‚   â”‚   â””â”€â”€ aggregator.ts
â”‚   â””â”€â”€ export/
â”‚       â”œâ”€â”€ csvExporter.ts
â”‚       â””â”€â”€ imageExporter.ts
â”œâ”€â”€ store/               # çŠ¶æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ slices/
â”‚   â”‚   â”œâ”€â”€ analysisSlice.ts
â”‚   â”‚   â”œâ”€â”€ dataSlice.ts
â”‚   â”‚   â””â”€â”€ uiSlice.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ types/               # å‹å®šç¾©
â”‚   â”œâ”€â”€ analysis.ts
â”‚   â”œâ”€â”€ data.ts
â”‚   â”œâ”€â”€ chart.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ utils/               # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ formatters.ts
â”‚   â”œâ”€â”€ validators.ts
â”‚   â””â”€â”€ constants.ts
â”œâ”€â”€ config/              # è¨­å®š
â”‚   â”œâ”€â”€ analysisConfigs.ts
â”‚   â””â”€â”€ themeConfigs.ts
â””â”€â”€ tests/               # ãƒ†ã‚¹ãƒˆ
    â”œâ”€â”€ unit/
    â”œâ”€â”€ integration/
    â””â”€â”€ e2e/
```

---

## 5. ãƒ•ã‚§ãƒ¼ã‚ºåˆ¥å®Ÿè£…è¨ˆç”»

### Phase 1: åŸºç›¤æ•´ç†ï¼ˆ2é€±é–“ï¼‰

#### Week 1: å‹å®šç¾©ã®æ•´ç†ã¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£åˆ†é›¢

**ç›®æ¨™**: å‹å®‰å…¨æ€§ã®å‘ä¸Šã¨å…±é€šãƒ­ã‚¸ãƒƒã‚¯ã®åˆ†é›¢

**ã‚¿ã‚¹ã‚¯**:

1. **å‹å®šç¾©ã®å†æ§‹ç¯‰** (3æ—¥)
   ```typescript
   // types/data.ts
   export interface BrandMetrics {
     funnel: FunnelMetrics;
     timeline: TimelineMetrics;
     brandPower: BrandPowerMetrics;
     futurePower: FuturePowerMetrics;
   }
   
   export interface BrandData {
     [brandName: string]: BrandMetrics;
   }
   
   export interface SheetData {
     [sheetName: string]: BrandData;
   }
   
   // types/brandImage.ts
   export interface BrandImageValue {
     itemName: string;
     value: number;
   }
   
   export interface BrandImageData {
     [segmentName: string]: {
       [brandName: string]: BrandImageValue[];
     };
   }
   ```

2. **ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã®åˆ†é›¢** (2æ—¥)
   ```typescript
   // utils/formatters.ts
   export const formatSegmentName = (segmentName: string): string => {
     return segmentName.replace(/[ï¼ˆ(]BFDã‚·ãƒ¼ãƒˆ[_ï¼¿]?[å€¤]?[ï¼‰)]?.*?St\d+/g, '').trim();
   };
   
   export const formatBrandName = (
     brandName: string, 
     isAnonymized: boolean, 
     brandMap: Record<string, string>
   ): string => {
     return isAnonymized ? (brandMap[brandName] || brandName) : brandName;
   };
   
   export const formatNumber = (value: number, decimals: number = 1): string => {
     return value.toFixed(decimals);
   };
   ```

3. **å®šæ•°ã®æ•´ç†** (1æ—¥)
   ```typescript
   // config/constants.ts
   export const LIMITS = {
     MAX_BRANDS: 10,
     MAX_SEGMENTS: 10,
     TOP_BRAND_IMAGE_ITEMS: 30,
     MIN_CHART_HEIGHT: 200,
     MAX_CHART_HEIGHT: 800,
     DEFAULT_CHART_HEIGHT: 400,
   } as const;
   
   export const STORAGE_KEYS = {
     ANALYSIS_MODE: 'funnel_analysis_mode',
     TARGET_BRAND: 'funnel_target_brand',
     SELECTED_BRANDS: 'funnel_selected_brands',
     SELECTED_SEGMENTS: 'funnel_selected_segments',
     SELECTED_ITEM: 'funnel_selected_item',
     CHART_HEIGHT: 'chart_height',
   } as const;
   
   export const REGEX_PATTERNS = {
     SEGMENT_CLEANUP: /[ï¼ˆ(]BFDã‚·ãƒ¼ãƒˆ[_ï¼¿]?[å€¤]?[ï¼‰)]?.*?St\d+/g,
   } as const;
   ```

4. **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°ã®ä½œæˆ** (1æ—¥)
   ```typescript
   // utils/validators.ts
   export const validateExcelStructure = (data: any[][]): boolean => {
     // Excelãƒ‡ãƒ¼ã‚¿ã®æ§‹é€ æ¤œè¨¼
     return data.length >= 4;
   };
   
   export const validateBrandLimit = (count: number): boolean => {
     return count <= LIMITS.MAX_BRANDS;
   };
   ```

---

#### Week 2: ã‚µãƒ¼ãƒ“ã‚¹å±¤ã®åˆ†é›¢

**ç›®æ¨™**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰åˆ†é›¢

**ã‚¿ã‚¹ã‚¯**:

1. **Excelãƒ‘ãƒ¼ã‚µãƒ¼ã‚µãƒ¼ãƒ“ã‚¹ã®åˆ†é›¢** (3æ—¥)
   ```typescript
   // services/excelParser/parser.ts
   export class ExcelParser {
     async parse(arrayBuffer: ArrayBuffer): Promise<ParsedData> {
       const workbook = read(arrayBuffer);
       const sheetData: SheetData = {};
       const brandImageData: BrandImageData = {};
       
       for (const sheetName of workbook.SheetNames) {
         const parsed = this.parseSheet(workbook.Sheets[sheetName], sheetName);
         sheetData[sheetName] = parsed.brands;
         brandImageData[sheetName] = parsed.brandImages;
       }
       
       return { sheetData, brandImageData };
     }
     
     private parseSheet(worksheet: WorkSheet, sheetName: string): ParsedSheet {
       // ã‚·ãƒ¼ãƒˆè§£æãƒ­ã‚¸ãƒƒã‚¯
     }
   }
   ```

2. **ãƒ‡ãƒ¼ã‚¿å¤‰æ›ã‚µãƒ¼ãƒ“ã‚¹ã®æ”¹å–„** (2æ—¥)
   ```typescript
   // services/dataTransform/transformer.ts
   export class ChartDataTransformer {
     constructor(private config: AnalysisModeConfig) {}
     
     transform(
       data: SheetData,
       filterValues: FilterValues,
       seriesValues: SeriesValues,
       brandImageData?: BrandImageData
     ): ChartDataPoint[] {
       const strategy = this.getTransformStrategy();
       return strategy.transform(data, filterValues, seriesValues, brandImageData);
     }
     
     private getTransformStrategy(): TransformStrategy {
       // Strategy ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã‚ˆã‚‹å¤‰æ›ãƒ­ã‚¸ãƒƒã‚¯ã®åˆ†é›¢
     }
   }
   ```

3. **ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã‚µãƒ¼ãƒ“ã‚¹ã®ä½œæˆ** (2æ—¥)
   ```typescript
   // services/export/csvExporter.ts
   export class CSVExporter {
     export(data: ChartDataPoint[], mode: AnalysisMode): string {
       const strategy = this.getExportStrategy(mode);
       return strategy.export(data);
     }
   }
   
   // services/export/imageExporter.ts
   export class ImageExporter {
     async exportToClipboard(element: HTMLElement): Promise<void> {
       const canvas = await html2canvas(element, {
         backgroundColor: '#ffffff',
         scale: 2,
         logging: false
       });
       
       return new Promise((resolve, reject) => {
         canvas.toBlob(async (blob) => {
           if (!blob) return reject(new Error('Failed to create blob'));
           
           try {
             await navigator.clipboard.write([
               new ClipboardItem({ 'image/png': blob })
             ]);
             resolve();
           } catch (err) {
             reject(err);
           }
         });
       });
     }
   }
   ```

---

### Phase 2: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæœ€é©åŒ–ï¼ˆ2é€±é–“ï¼‰

#### Week 3: ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã®å°å…¥

**ç›®æ¨™**: ãƒ­ã‚¸ãƒƒã‚¯ã®å†åˆ©ç”¨æ€§å‘ä¸Šã¨çŠ¶æ…‹ç®¡ç†ã®æ”¹å–„

**ã‚¿ã‚¹ã‚¯**:

1. **ãƒ‡ãƒ¼ã‚¿ç®¡ç†ãƒ•ãƒƒã‚¯** (3æ—¥)
   ```typescript
   // hooks/useChartData.ts
   export const useChartData = (
     analysisMode: AnalysisMode,
     data: SheetData,
     filterValues: FilterValues,
     seriesValues: SeriesValues,
     brandImageData?: BrandImageData
   ) => {
     return useMemo(() => {
       const config = ANALYSIS_MODE_CONFIGS[analysisMode];
       const transformer = new ChartDataTransformer(config);
       return transformer.transform(data, filterValues, seriesValues, brandImageData);
     }, [analysisMode, data, filterValues, seriesValues, brandImageData]);
   };
   
   // hooks/useExcelParser.ts
   export const useExcelParser = () => {
     const [isLoading, setIsLoading] = useState(false);
     const [error, setError] = useState<Error | null>(null);
     
     const parse = useCallback(async (file: File) => {
       setIsLoading(true);
       setError(null);
       
       try {
         const arrayBuffer = await file.arrayBuffer();
         const parser = new ExcelParser();
         const result = await parser.parse(arrayBuffer);
         setIsLoading(false);
         return result;
       } catch (err) {
         setError(err as Error);
         setIsLoading(false);
         throw err;
       }
     }, []);
     
     return { parse, isLoading, error };
   };
   ```

2. **çŠ¶æ…‹æ°¸ç¶šåŒ–ãƒ•ãƒƒã‚¯** (2æ—¥)
   ```typescript
   // hooks/usePersistence.ts
   export const usePersistence = <T>(
     key: string,
     initialValue: T
   ): [T, (value: T) => void] => {
     const [state, setState] = useState<T>(() => {
       try {
         const item = localStorage.getItem(key);
         return item ? JSON.parse(item) : initialValue;
       } catch {
         return initialValue;
       }
     });
     
     const setValue = useCallback((value: T) => {
       try {
         setState(value);
         localStorage.setItem(key, JSON.stringify(value));
       } catch (error) {
         console.error(`Failed to persist ${key}:`, error);
       }
     }, [key]);
     
     return [state, setValue];
   };
   
   // ä½¿ç”¨ä¾‹
   const [analysisMode, setAnalysisMode] = usePersistence<AnalysisMode>(
     STORAGE_KEYS.ANALYSIS_MODE,
     'segment_x_multi_brand'
   );
   ```

3. **åˆ†æãƒ¢ãƒ¼ãƒ‰ç®¡ç†ãƒ•ãƒƒã‚¯** (2æ—¥)
   ```typescript
   // hooks/useAnalysisMode.ts
   export const useAnalysisMode = () => {
     const [mode, setMode] = usePersistence<AnalysisMode>(
       STORAGE_KEYS.ANALYSIS_MODE,
       'segment_x_multi_brand'
     );
     
     const config = useMemo(() => ANALYSIS_MODE_CONFIGS[mode], [mode]);
     
     const changeMode = useCallback((newMode: AnalysisMode) => {
       setMode(newMode);
       // ãƒ¢ãƒ¼ãƒ‰å¤‰æ›´æ™‚ã®å‰¯ä½œç”¨å‡¦ç†
     }, [setMode]);
     
     return {
       mode,
       config,
       changeMode,
     };
   };
   ```

---

#### Week 4: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åˆ†å‰²ã¨æœ€é©åŒ–

**ç›®æ¨™**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è²¬å‹™ã‚’æ˜ç¢ºåŒ–ã—ã€å†åˆ©ç”¨æ€§ã‚’å‘ä¸Š

**ã‚¿ã‚¹ã‚¯**:

1. **Appã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åˆ†å‰²** (4æ—¥)
   ```typescript
   // App.tsx (ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¾Œ: 150è¡Œ)
   const App: React.FC = () => {
     const { mode, config, changeMode } = useAnalysisMode();
     const { data, brandImageData, loadData } = useDataManagement();
     const { chartData } = useChartData(mode, data, ...);
     
     return (
       <div className="flex h-screen">
         <IconBar {...iconBarProps} />
         <Sidebar {...sidebarProps} />
         <MainContent {...mainContentProps} />
       </div>
     );
   };
   
   // components/MainContent.tsx (æ–°è¦)
   const MainContent: React.FC<MainContentProps> = (props) => {
     return (
       <div className="flex-1 flex flex-col">
         <ChartArea {...chartAreaProps} />
       </div>
     );
   };
   ```

2. **å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆ** (2æ—¥)
   ```typescript
   // components/common/Select/Select.tsx
   export const Select: React.FC<SelectProps> = ({
     value,
     options,
     onChange,
     placeholder,
     ...props
   }) => {
     return (
       <div className="relative">
         <select
           value={value}
           onChange={(e) => onChange(e.target.value)}
           className="w-full p-2.5 pr-8 bg-white border rounded-lg..."
           {...props}
         >
           {placeholder && <option value="">{placeholder}</option>}
           {options.map((opt) => (
             <option key={opt.value} value={opt.value}>
               {opt.label}
             </option>
           ))}
         </select>
         <ChevronDown className="absolute right-2 top-3 w-4 h-4" />
       </div>
     );
   };
   
   // components/common/Badge/Badge.tsx
   export const Badge: React.FC<BadgeProps> = ({ children, variant }) => {
     const variants = {
       primary: 'bg-indigo-100 text-indigo-700 border-indigo-200',
       success: 'bg-emerald-100 text-emerald-700 border-emerald-200',
       warning: 'bg-amber-100 text-amber-700 border-amber-200',
     };
     
     return (
       <span className={`text-[10px] px-1.5 py-0.5 rounded-full font-bold border ${variants[variant]}`}>
         {children}
       </span>
     );
   };
   ```

3. **ãƒ¡ãƒ¢åŒ–ã®æœ€é©åŒ–** (1æ—¥)
   ```typescript
   // Before: éå‰°ãªãƒ¡ãƒ¢åŒ–
   const chartData = useMemo(() => { ... }, [dep1, dep2, dep3, dep4, dep5]);
   
   // After: é©åˆ‡ãªç²’åº¦ã§ã®ãƒ¡ãƒ¢åŒ–
   const filterValues = useMemo(() => ({ ... }), [mode, sheet, targetBrand]);
   const seriesValues = useMemo(() => ({ ... }), [mode, selectedBrands, selectedSegments]);
   const chartData = useChartData(mode, data, filterValues, seriesValues, brandImageData);
   ```

---

### Phase 3: é«˜åº¦ãªæœ€é©åŒ–ï¼ˆ2é€±é–“ï¼‰

#### Week 5: çŠ¶æ…‹ç®¡ç†ã®å°å…¥ã¨ãƒ†ã‚¹ãƒˆæ•´å‚™

**ç›®æ¨™**: ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ãªçŠ¶æ…‹ç®¡ç†ã¨ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®ç¢ºä¿

**ã‚¿ã‚¹ã‚¯**:

1. **Zustandå°å…¥ï¼ˆè»½é‡ãªçŠ¶æ…‹ç®¡ç†ï¼‰** (3æ—¥)
   ```typescript
   // store/analysisStore.ts
   import create from 'zustand';
   import { persist } from 'zustand/middleware';
   
   interface AnalysisState {
     mode: AnalysisMode;
     selectedBrands: string[];
     selectedSegments: string[];
     selectedItem: string;
     setMode: (mode: AnalysisMode) => void;
     addBrand: (brand: string) => void;
     removeBrand: (brand: string) => void;
     // ...
   }
   
   export const useAnalysisStore = create<AnalysisState>()(
     persist(
       (set) => ({
         mode: 'segment_x_multi_brand',
         selectedBrands: [],
         selectedSegments: [],
         selectedItem: 'FT',
         setMode: (mode) => set({ mode }),
         addBrand: (brand) => set((state) => ({
           selectedBrands: [...state.selectedBrands, brand]
         })),
         // ...
       }),
       {
         name: 'analysis-storage',
       }
     )
   );
   ```

2. **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®ä½œæˆ** (3æ—¥)
   ```typescript
   // services/excelParser/parser.test.ts
   describe('ExcelParser', () => {
     it('should parse valid Excel file', async () => {
       const parser = new ExcelParser();
       const result = await parser.parse(mockArrayBuffer);
       
       expect(result.sheetData).toBeDefined();
       expect(Object.keys(result.sheetData)).toHaveLength(5);
     });
     
     it('should throw error for invalid Excel structure', async () => {
       const parser = new ExcelParser();
       await expect(parser.parse(invalidArrayBuffer)).rejects.toThrow();
     });
   });
   
   // hooks/useChartData.test.ts
   describe('useChartData', () => {
     it('should transform data correctly', () => {
       const { result } = renderHook(() =>
         useChartData(mockMode, mockData, mockFilters, mockSeries)
       );
       
       expect(result.current).toHaveLength(6);
       expect(result.current[0].name).toBe('èªçŸ¥ã‚ã‚Š(TOP2)');
     });
   });
   ```

3. **çµ±åˆãƒ†ã‚¹ãƒˆã®ä½œæˆ** (1æ—¥)
   ```typescript
   // tests/integration/chartRendering.test.tsx
   describe('Chart Rendering Integration', () => {
     it('should render chart with selected brands', () => {
       render(
         <App />
       );
       
       // ãƒ–ãƒ©ãƒ³ãƒ‰ã‚’é¸æŠ
       const brandSelect = screen.getByLabelText('ãƒ–ãƒ©ãƒ³ãƒ‰ã‚’è¿½åŠ ');
       fireEvent.change(brandSelect, { target: { value: 'ãƒ™ãƒ«ãƒ¼ãƒŠ' } });
       
       // ãƒãƒ£ãƒ¼ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
       expect(screen.getByText('ãƒ™ãƒ«ãƒ¼ãƒŠ')).toBeInTheDocument();
       expect(screen.getByRole('img')).toBeInTheDocument();
     });
   });
   ```

---

#### Week 6: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã¨ä»•ä¸Šã’

**ç›®æ¨™**: æœ€çµ‚çš„ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™

**ã‚¿ã‚¹ã‚¯**:

1. **ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æœ€é©åŒ–** (2æ—¥)
   ```typescript
   // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¡ãƒ¢åŒ–
   export const ChartArea = React.memo<ChartAreaProps>(
     ({ analysisMode, chartData, ... }) => {
       // ...
     },
     (prevProps, nextProps) => {
       // ã‚«ã‚¹ã‚¿ãƒ æ¯”è¼ƒé–¢æ•°ã§ä¸è¦ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’é˜²ã
       return (
         prevProps.analysisMode === nextProps.analysisMode &&
         shallowEqual(prevProps.chartData, nextProps.chartData)
       );
     }
   );
   
   // ä»®æƒ³åŒ–ã®å°å…¥ï¼ˆé•·ã„ãƒªã‚¹ãƒˆã®å ´åˆï¼‰
   import { VirtualScroller } from 'react-virtual';
   
   const BrandList = () => {
     const parentRef = useRef();
     const rowVirtualizer = useVirtualizer({
       count: brands.length,
       getScrollElement: () => parentRef.current,
       estimateSize: () => 50,
     });
     
     return (
       <div ref={parentRef} style={{ height: 400, overflow: 'auto' }}>
         {rowVirtualizer.getVirtualItems().map((virtualRow) => (
           <BrandItem key={virtualRow.key} brand={brands[virtualRow.index]} />
         ))}
       </div>
     );
   };
   ```

2. **ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºæœ€é©åŒ–** (1æ—¥)
   ```typescript
   // vite.config.ts
   export default defineConfig({
     build: {
       rollupOptions: {
         output: {
           manualChunks: {
             'react-vendor': ['react', 'react-dom'],
             'chart-vendor': ['recharts'],
             'dnd-vendor': ['@dnd-kit/core', '@dnd-kit/sortable'],
           },
         },
       },
       chunkSizeWarningLimit: 1000,
     },
     optimizeDeps: {
       include: ['xlsx', 'html2canvas'],
     },
   });
   ```

3. **ã‚¨ãƒ©ãƒ¼ãƒã‚¦ãƒ³ãƒ€ãƒªã®è¿½åŠ ** (1æ—¥)
   ```typescript
   // components/ErrorBoundary.tsx
   export class ErrorBoundary extends React.Component<Props, State> {
     constructor(props: Props) {
       super(props);
       this.state = { hasError: false, error: null };
     }
     
     static getDerivedStateFromError(error: Error) {
       return { hasError: true, error };
     }
     
     componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {
       console.error('Error caught by boundary:', error, errorInfo);
       // ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã«é€ä¿¡
     }
     
     render() {
       if (this.state.hasError) {
         return (
           <div className="error-container">
             <h2>ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</h2>
             <p>{this.state.error?.message}</p>
             <button onClick={() => window.location.reload()}>
               ã‚¢ãƒ—ãƒªã‚’å†èª­ã¿è¾¼ã¿
             </button>
           </div>
         );
       }
       
       return this.props.children;
     }
   }
   ```

4. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™** (2æ—¥)
   - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³ã®ä½œæˆ
   - APIä»•æ§˜æ›¸ã®ä½œæˆ
   - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚«ã‚¿ãƒ­ã‚°ã®ä½œæˆï¼ˆStorybookï¼‰
   - ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰ã®ä½œæˆ

---

## 6. æŠ€è¡“çš„è©³ç´°

### 6.1 æ¨å¥¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªè¿½åŠ 

```json
{
  "dependencies": {
    "zustand": "^4.5.0",           // è»½é‡çŠ¶æ…‹ç®¡ç†
    "zod": "^3.22.0",              // ã‚¹ã‚­ãƒ¼ãƒãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    "react-virtual": "^2.10.4"     // ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
  },
  "devDependencies": {
    "@testing-library/react": "^14.1.2",
    "@testing-library/jest-dom": "^6.1.5",
    "@testing-library/user-event": "^14.5.1",
    "vitest": "^1.0.4",
    "@vitest/ui": "^1.0.4",
    "jsdom": "^23.0.1",
    "@storybook/react": "^7.6.3",  // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚«ã‚¿ãƒ­ã‚°
    "eslint": "^8.56.0",
    "eslint-plugin-react-hooks": "^4.6.0",
    "prettier": "^3.1.1"
  }
}
```

### 6.2 è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¾‹

```typescript
// vitest.config.ts
import { defineConfig } from 'vitest/config';
import react from '@vitejs/plugin-react';

export default defineConfig({
  plugins: [react()],
  test: {
    globals: true,
    environment: 'jsdom',
    setupFiles: './tests/setup.ts',
    coverage: {
      provider: 'c8',
      reporter: ['text', 'json', 'html'],
      lines: 80,
      branches: 80,
      functions: 80,
      statements: 80,
    },
  },
});
```

```typescript
// .eslintrc.json
{
  "extends": [
    "eslint:recommended",
    "plugin:react/recommended",
    "plugin:react-hooks/recommended",
    "plugin:@typescript-eslint/recommended"
  ],
  "rules": {
    "react-hooks/rules-of-hooks": "error",
    "react-hooks/exhaustive-deps": "warn",
    "@typescript-eslint/no-explicit-any": "warn",
    "@typescript-eslint/explicit-module-boundary-types": "off"
  }
}
```

---

## 7. ãƒªã‚¹ã‚¯ã¨å¯¾ç­–

| ãƒªã‚¹ã‚¯ | å½±éŸ¿åº¦ | å¯¾ç­– |
|--------|--------|------|
| æ—¢å­˜æ©Ÿèƒ½ã®ç ´å£Š | é«˜ | ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Šã‚’ç¢ºä¿ |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŠ£åŒ– | ä¸­ | ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯æ¸¬å®šã¨ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚° |
| é–‹ç™ºæœŸé–“ã®å»¶é•· | ä¸­ | æ®µéšçš„ãƒªãƒªãƒ¼ã‚¹ã€MVPå„ªå…ˆ |
| ãƒãƒ¼ãƒ å­¦ç¿’ã‚³ã‚¹ãƒˆ | ä½ | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™ã€ãƒšã‚¢ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚° |

---

## 8. æˆåŠŸæŒ‡æ¨™

### 8.1 ã‚³ãƒ¼ãƒ‰å“è³ªæŒ‡æ¨™

| æŒ‡æ¨™ | ç¾çŠ¶ | ç›®æ¨™ |
|------|------|------|
| å¹³å‡ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º | 400è¡Œ | 200è¡Œä»¥ä¸‹ |
| Appã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚µã‚¤ã‚º | 991è¡Œ | 150è¡Œä»¥ä¸‹ |
| TypeScriptå‹ã‚«ãƒãƒ¬ãƒƒã‚¸ | 85% | 95%ä»¥ä¸Š |
| ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ | 0% | 80%ä»¥ä¸Š |
| Lintã‚¨ãƒ©ãƒ¼ | 0 | 0 |

### 8.2 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™

| æŒ‡æ¨™ | ç¾çŠ¶ | ç›®æ¨™ |
|------|------|------|
| åˆå›ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚é–“ | - | 2ç§’ä»¥ä¸‹ |
| Excelãƒ‘ãƒ¼ã‚¹æ™‚é–“ï¼ˆ10MBï¼‰ | - | 3ç§’ä»¥ä¸‹ |
| ãƒãƒ£ãƒ¼ãƒˆæç”»æ™‚é–“ | - | 500msä»¥ä¸‹ |
| ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º | - | 500KBä»¥ä¸‹ |

### 8.3 é–‹ç™ºè€…ä½“é¨“æŒ‡æ¨™

| æŒ‡æ¨™ | ç¾çŠ¶ | ç›®æ¨™ |
|------|------|------|
| æ–°æ©Ÿèƒ½è¿½åŠ æ™‚é–“ | - | 2æ—¥ä»¥ä¸‹ |
| ãƒã‚°ä¿®æ­£æ™‚é–“ | - | åŠæ—¥ä»¥ä¸‹ |
| ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æœŸé–“ | - | 1é€±é–“ä»¥ä¸‹ |

---

## 9. ã¾ã¨ã‚

ã“ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°è¨ˆç”»ã«ã‚ˆã‚Šã€BFD Analyticsã¯ä»¥ä¸‹ã®æ”¹å–„ãŒæœŸå¾…ã•ã‚Œã¾ã™ï¼š

âœ… **ä¿å®ˆæ€§**: 991è¡Œã®ãƒ¢ãƒãƒªã‚¹ã‹ã‚‰æ˜ç¢ºã«åˆ†é›¢ã•ã‚ŒãŸæ§‹é€ ã¸  
âœ… **æ‹¡å¼µæ€§**: æ–°ã—ã„åˆ†æãƒ¢ãƒ¼ãƒ‰ã®è¿½åŠ ãŒå®¹æ˜“ã«  
âœ… **å“è³ª**: ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Šã‚’ç¢ºä¿  
âœ… **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: æœ€é©åŒ–ã«ã‚ˆã‚Šå¿«é©ãªUX  
âœ… **é–‹ç™ºè€…ä½“é¨“**: æ˜ç¢ºãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§é–‹ç™ºåŠ¹ç‡å‘ä¸Š  

æ®µéšçš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«ã‚ˆã‚Šã€æ©Ÿèƒ½ã‚’ç¶­æŒã—ãªãŒã‚‰ç¢ºå®Ÿã«æ”¹å–„ã‚’é€²ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

---

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**: 
1. ã“ã®ãƒ—ãƒ©ãƒ³ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åé›†
2. Phase 1ã®ã‚­ãƒƒã‚¯ã‚ªãƒ•
3. é€±æ¬¡é€²æ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®å®Ÿæ–½

**ä½œæˆè€…**: AI Assistant  
**ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾…ã¡**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚ªãƒ¼ãƒŠãƒ¼

